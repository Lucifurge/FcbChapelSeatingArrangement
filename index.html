<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chapel U-Shaped Seating</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  margin: 0;
  padding: 0;
  text-align: center;
}

h1 {
  margin-top: 20px;
  font-size: 1.6rem;
  color: #1b5e20;
}

#nameInput {
  margin-top: 15px;
  padding: 8px;
  width: 200px;
  border-radius: 6px;
  border: 1px solid #aaa;
}

#message {
  margin-top: 10px;
  font-weight: bold;
  color: #333;
}

#grid {
  position: relative;
  width: 100%;
  height: 700px;
  margin-top: 40px;
}

/* Seat styles */
.seat {
  position: absolute;
  padding: 8px 6px;
  font-size: 0.72rem;
  min-width: 28px;
  max-width: 32px;
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
  font-weight: bold;
  color: white;
  box-shadow: 0 2px 5px rgba(0,0,0,0.22);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.seat:hover {
  transform: scale(1.05);
  box-shadow: 0 3px 8px rgba(0,0,0,0.28);
}

.gold {
  background: linear-gradient(135deg, #ffd700, #ffb300);
  color: #333;
}

.green {
  background: linear-gradient(135deg, #4caf50, #2e7d32);
  color: white;
}

.reserved {
  background: #9e9e9e !important;
  cursor: not-allowed;
  color: #fff !important;
}
</style>
</head>
<body>

<h1>Chapel Seating</h1>
<input id="nameInput" placeholder="Enter your name">
<div id="message"></div>
<div id="grid"></div>

<script>
const rows = 12; // Aâ€“L
let reservations = {};
const grid = document.getElementById("grid");

function buildSeats() {
  grid.innerHTML = "";
  const centerX = grid.offsetWidth / 2;
  const centerY = grid.offsetHeight - 20; // U opens upward
  const radiusStep = 40; // distance between rows

  for (let r = 0; r < rows; r++) {
    const isGold = r < 6;
    const seatsInRow = isGold ? 18 : 24;
    const groupSize = isGold ? 6 : 4;
    const groupSpacing = isGold ? 50 : 40; // space between seat groups

    const rowRadius = radiusStep * (rows - r);

    for (let i = 0; i < seatsInRow; i++) {
      // Apply group spacing
      const groupIndex = Math.floor(i / groupSize);
      const intraGroupIndex = i % groupSize;
      const totalSeatsInRow = seatsInRow + (Math.floor(seatsInRow/groupSize)-1);
      const angleRange = Math.PI; // 180 degrees semicircle
      const startAngle = Math.PI - angleRange/2; // left end
      const seatIndexAdjusted = i + groupIndex*(groupSpacing/40); // add spacing units
      const angle = startAngle + (angleRange / (totalSeatsInRow - 1)) * seatIndexAdjusted;

      const x = centerX + rowRadius * Math.cos(angle) - 16;
      const y = centerY - rowRadius * Math.sin(angle) - 16;

      const id = String.fromCharCode(65+r) + (i+1);
      const seat = document.createElement("div");
      seat.className = "seat";
      seat.classList.add(isGold ? "gold" : "green");
      seat.textContent = id;
      seat.style.left = x + "px";
      seat.style.top = y + "px";

      if (reservations[id]) seat.classList.add("reserved");

      seat.onclick = () => reserveSeat(id);
      grid.appendChild(seat);
    }
  }
}

function reserveSeat(id) {
  const name = document.getElementById("nameInput").value.trim();
  if (!name) {
    showMessage("Please enter your name first.");
    return;
  }
  if (reservations[id]) {
    showMessage("Seat is already reserved.");
    return;
  }
  reservations[id] = { name, time: new Date().toLocaleString() };
  showMessage(`Seat ${id} reserved successfully.`);
  buildSeats();
}

function showMessage(msg) {
  document.getElementById("message").textContent = msg;
}

// Rebuild seats on resize
window.addEventListener("resize", buildSeats);

buildSeats();
</script>

</body>
</html>
